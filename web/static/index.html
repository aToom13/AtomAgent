<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AtomAgent - AI Development Assistant</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    
    <!-- Syntax Highlighting -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
    
    <!-- Modular CSS -->
    <link rel="stylesheet" href="/static/css/main.css">
</head>
<body>
    <div id="app">
        <!-- Left Sidebar - Sessions -->
        <aside id="sidebar" class="sidebar">
            <div class="sidebar-header">
                <button id="toggle-sidebar" class="icon-btn" title="Paneli Daralt">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M11 19l-7-7 7-7M18 19l-7-7 7-7"/>
                    </svg>
                </button>
                <span class="sidebar-title">Sohbetler</span>
                <button id="new-chat-btn" class="icon-btn primary" title="Yeni Sohbet">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 5v14M5 12h14"/>
                    </svg>
                </button>
            </div>
            <div id="sessions-list" class="sessions-list"></div>
            <div class="sidebar-footer">
                <button id="settings-btn" class="settings-btn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="3"/>
                        <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/>
                    </svg>
                    <span>Ayarlar</span>
                </button>
            </div>
        </aside>

        <!-- Collapsed Sidebar -->
        <aside id="sidebar-collapsed" class="sidebar-collapsed hidden">
            <button id="expand-sidebar" class="icon-btn" title="Paneli Geni≈ület">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M13 5l7 7-7 7M6 5l7 7-7 7"/>
                </svg>
            </button>
            <button id="new-chat-collapsed" class="icon-btn" title="Yeni Sohbet">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 5v14M5 12h14"/>
                </svg>
            </button>
            <div class="collapsed-spacer"></div>
            <button id="settings-collapsed" class="icon-btn" title="Ayarlar">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="3"/>
                    <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/>
                </svg>
            </button>
        </aside>

        <!-- Main Chat Area -->
        <main id="chat-area" class="chat-area">
            <div class="chat-header">
                <div class="chat-title">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/>
                        <path d="M12 16v-4M12 8h.01"/>
                    </svg>
                    <h1>AtomAgent</h1>
                </div>
                <div class="chat-status" id="chat-status">
                    <span class="status-dot"></span>
                    <span>Hazƒ±r</span>
                </div>
            </div>
            
            <div id="messages" class="messages">
                <div class="welcome-message">
                    <div class="welcome-icon">ü§ñ</div>
                    <h2>AtomAgent'a Ho≈ü Geldiniz</h2>
                    <p>AI destekli geli≈ütirme asistanƒ±nƒ±z hazƒ±r. Bir soru sorun veya g√∂rev verin.</p>
                </div>
            </div>
            
            <!-- Agent Status Bar -->
            <div id="agent-status-bar" class="agent-status-bar hidden">
                <div class="status-indicator" id="status-indicator" onclick="window.AtomAgent.toggleThinkingPanel()">
                    <span class="status-spinner"></span>
                    <span id="status-text">Hazƒ±r</span>
                    <span class="status-expand-icon">‚ñº</span>
                </div>
                <div id="status-model" class="status-model"></div>
            </div>
            
            <div class="input-area">
                <!-- Attachment Preview -->
                <div id="attachment-preview" class="attachment-preview hidden"></div>
                
                <div class="input-container">
                    <!-- Attach Button -->
                    <div class="attach-wrapper">
                        <button id="attach-btn" class="attach-btn" title="Dosya Ekle">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"/>
                            </svg>
                        </button>
                        <!-- Attach Menu -->
                        <div id="attach-menu" class="attach-menu hidden">
                            <button class="attach-option" data-type="image">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="3" y="3" width="18" height="18" rx="2"/><circle cx="8.5" cy="8.5" r="1.5"/><path d="M21 15l-5-5L5 21"/>
                                </svg>
                                <span>Resim</span>
                            </button>
                            <button class="attach-option" data-type="audio">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"/><path d="M19 10v2a7 7 0 0 1-14 0v-2"/><line x1="12" y1="19" x2="12" y2="23"/><line x1="8" y1="23" x2="16" y2="23"/>
                                </svg>
                                <span>Ses Kaydƒ±</span>
                            </button>
                            <button class="attach-option" data-type="file">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/>
                                </svg>
                                <span>Dosya</span>
                            </button>
                            <button class="attach-option" data-type="code">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polyline points="16 18 22 12 16 6"/><polyline points="8 6 2 12 8 18"/>
                                </svg>
                                <span>Kod Dosyasƒ±</span>
                            </button>
                        </div>
                    </div>
                    
                    <!-- Hidden File Inputs -->
                    <input type="file" id="image-input" accept="image/*" class="hidden-input">
                    <input type="file" id="audio-input" accept="audio/*" class="hidden-input">
                    <input type="file" id="file-input" class="hidden-input">
                    <input type="file" id="code-input" accept=".py,.js,.ts,.jsx,.tsx,.html,.css,.json,.yaml,.yml,.md,.txt,.sh,.sql,.java,.cpp,.c,.h,.go,.rs,.rb,.php" class="hidden-input">
                    
                    <textarea id="message-input" placeholder="Mesajƒ±nƒ±zƒ± yazƒ±n... (Enter g√∂nderir, Shift+Enter yeni satƒ±r)" rows="1"></textarea>
                    
                    <button id="send-btn" class="send-btn" title="G√∂nder">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z"/>
                        </svg>
                    </button>
                    <button id="stop-btn" class="stop-btn hidden" title="Durdur">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <rect x="6" y="6" width="12" height="12" rx="2"/>
                        </svg>
                    </button>
                </div>
            </div>""
        </main>

        <!-- Resize Handle -->
        <div id="resize-handle" class="resize-handle"></div>

        <!-- Right Panel -->
        <aside id="right-panel" class="right-panel">
            <div class="panel-tabs">
                <button class="tab-btn active" data-tab="terminal">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="4 17 10 11 4 5"/><line x1="12" y1="19" x2="20" y2="19"/>
                    </svg>
                    <span>Terminal</span>
                </button>
                <button class="tab-btn" data-tab="tools">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"/>
                    </svg>
                    <span>Ara√ßlar</span>
                </button>
                <button class="tab-btn" data-tab="tasks">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9 11l3 3L22 4"/><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"/>
                    </svg>
                    <span>G√∂revler</span>
                </button>
                <button class="tab-btn" data-tab="browser">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/>
                    </svg>
                    <span>Browser</span>
                </button>
                <button class="tab-btn" data-tab="docker">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="2" y="7" width="20" height="14" rx="2"/>
                        <path d="M16 7V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v3"/>
                    </svg>
                    <span>Docker</span>
                </button>
                <button class="tab-btn" data-tab="files">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"/>
                    </svg>
                    <span>Dosyalar</span>
                </button>
                <button class="tab-btn" data-tab="editor">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                        <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
                    </svg>
                    <span>Edit√∂r</span>
                </button>
            </div>
            
            <div class="panel-content">
                <!-- Terminal Tab -->
                <div id="tab-terminal" class="tab-content active">
                    <div class="terminal-output" id="terminal-output">
                        <div class="terminal-line">
                            <span class="prompt">$</span>
                            <span>Agent √ßalƒ±≈üma √ßƒ±ktƒ±larƒ± burada g√∂r√ºnecek...</span>
                        </div>
                    </div>
                </div>
                
                <!-- Files Tab -->
                <div id="tab-files" class="tab-content">
                    <div class="file-tabs">
                        <button class="file-tab active" data-source="workspace">üìÅ Workspace</button>
                        <button class="file-tab" data-source="docker">ÔøΩ Doclker</button>
                    </div>
                    <div class="file-tree" id="file-tree"></div>
                </div>
                
                <!-- Editor Tab -->
                <div id="tab-editor" class="tab-content">
                    <div class="editor-header">
                        <span id="editor-filename">Dosya se√ßilmedi</span>
                        <button id="save-file-btn" class="small-btn" disabled>Kaydet</button>
                    </div>
                    <textarea id="code-editor" class="code-editor" placeholder="Dosya i√ßeriƒüi burada g√∂r√ºnecek..."></textarea>
                </div>
                
                <!-- Tools Tab -->
                <div id="tab-tools" class="tab-content">
                    <div id="tools-list" class="tools-list">
                        <div class="tools-empty">
                            <div class="tools-empty-icon">üîß</div>
                            <p>Hen√ºz ara√ß kullanƒ±lmadƒ±</p>
                            <p class="tools-hint">Agent √ßalƒ±≈ümaya ba≈üladƒ±ƒüƒ±nda kullanƒ±lan ara√ßlar burada g√∂r√ºnecek</p>
                        </div>
                    </div>
                </div>
                
                <!-- Tasks Tab -->
                <div id="tab-tasks" class="tab-content">
                    <div id="tasks-list" class="tasks-list">
                        <div class="tasks-empty">
                            <div class="tasks-empty-icon">üìã</div>
                            <p>Aktif g√∂rev yok</p>
                            <p class="tasks-hint">Agent'a bir g√∂rev verdiƒüinizde burada takip edebilirsiniz</p>
                        </div>
                    </div>
                </div>
                
                <!-- Browser Tab -->
                <div id="tab-browser" class="tab-content">
                    <div id="browser-content" class="browser-content">
                        <div class="browser-empty">
                            <div class="browser-empty-icon">üåê</div>
                            <p>Web aktivitesi yok</p>
                            <p class="browser-hint">Agent web aramasƒ± yaptƒ±ƒüƒ±nda sonu√ßlar burada g√∂r√ºnecek</p>
                        </div>
                    </div>
                </div>
                
                <!-- Docker Tab -->
                <div id="tab-docker" class="tab-content">
                    <div class="docker-status" id="docker-status">
                        <div class="docker-header">
                            <span class="docker-indicator" id="docker-indicator">‚óè</span>
                            <span id="docker-status-text">Baƒülantƒ± kontrol ediliyor...</span>
                            <button id="docker-refresh" class="icon-btn small" title="Yenile">‚Üª</button>
                        </div>
                    </div>
                    <div class="docker-output" id="docker-output">
                        <div class="docker-line">
                            <span class="docker-time">[--:--:--]</span>
                            <span>Docker komutlarƒ± burada g√∂r√ºnecek...</span>
                        </div>
                    </div>
                </div>
            </div>
        </aside>
    </div>

    <!-- Settings Modal -->
    <div id="settings-modal" class="modal hidden">
        <div class="modal-backdrop"></div>
        <div class="modal-content settings-modal">
            <div class="modal-header">
                <h2>‚öôÔ∏è Ayarlar</h2>
                <button id="close-settings" class="icon-btn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 6L6 18M6 6l12 12"/>
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <div class="settings-tabs">
                    <button class="settings-tab active" data-settings="models">Modeller</button>
                    <button class="settings-tab" data-settings="fallbacks">Fallback</button>
                    <button class="settings-tab" data-settings="prompts">Promptlar</button>
                    <button class="settings-tab" data-settings="commands">Komutlar</button>
                    <button class="settings-tab" data-settings="api">API Keys</button>
                </div>
                
                <!-- Models Settings -->
                <div id="settings-models" class="settings-content active">
                    <div class="settings-section">
                        <h3>Agent Modelleri</h3>
                        <p class="settings-note">Ayarlar .atom_settings.json dosyasƒ±na kaydedilir.</p>
                        <div class="model-role-tabs" id="model-role-tabs">
                            <button class="role-tab active" data-role="supervisor">Supervisor</button>
                            <button class="role-tab" data-role="coder">Coder</button>
                            <button class="role-tab" data-role="researcher">Researcher</button>
                            <button class="role-tab" data-role="vision">Vision</button>
                            <button class="role-tab" data-role="audio">Audio</button>
                            <button class="role-tab" data-role="tts">TTS</button>
                        </div>
                        <div class="model-config" id="model-configs"></div>
                    </div>
                </div>
                
                <!-- Fallback Settings -->
                <div id="settings-fallbacks" class="settings-content">
                    <div class="settings-section">
                        <h3>Fallback Modelleri</h3>
                        <p class="settings-note">Rate limit veya hata durumunda kullanƒ±lacak yedek modeller.</p>
                        <div class="model-role-tabs" id="fallback-role-tabs">
                            <button class="role-tab active" data-role="supervisor">Supervisor</button>
                            <button class="role-tab" data-role="coder">Coder</button>
                            <button class="role-tab" data-role="researcher">Researcher</button>
                            <button class="role-tab" data-role="vision">Vision</button>
                            <button class="role-tab" data-role="audio">Audio</button>
                            <button class="role-tab" data-role="tts">TTS</button>
                        </div>
                        <div class="fallback-config" id="fallback-configs"></div>
                        <div class="add-fallback">
                            <h4>Yeni Fallback Ekle</h4>
                            <div class="fallback-form">
                                <select id="new-fallback-provider"></select>
                                <input type="text" id="new-fallback-model" placeholder="Model adƒ±">
                                <button id="add-fallback-btn" class="small-btn primary">Ekle</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Prompts Settings -->
                <div id="settings-prompts" class="settings-content">
                    <div class="settings-section">
                        <h3>Sistem Promptlarƒ±</h3>
                        <div class="prompt-selector">
                            <select id="prompt-select">
                                <option value="supervisor">Supervisor</option>
                                <option value="coder">Coder</option>
                                <option value="researcher">Researcher</option>
                                <option value="planner">Planner</option>
                            </select>
                        </div>
                        <textarea id="prompt-editor" class="prompt-editor" rows="15"></textarea>
                        <button id="save-prompt-btn" class="primary-btn">Promptu Kaydet</button>
                    </div>
                </div>
                
                <!-- Commands Settings -->
                <div id="settings-commands" class="settings-content">
                    <div class="settings-section">
                        <h3>ƒ∞zin Verilen Komutlar</h3>
                        <div id="allowed-commands" class="command-list"></div>
                        <div class="add-command">
                            <input type="text" id="new-command" placeholder="Yeni komut ekle...">
                            <button id="add-command-btn" class="small-btn">Ekle</button>
                        </div>
                    </div>
                </div>
                
                <!-- API Keys Settings -->
                <div id="settings-api" class="settings-content">
                    <div class="settings-section">
                        <h3>API Anahtarlarƒ±</h3>
                        <p class="settings-note">API anahtarlarƒ± .env dosyasƒ±nda saklanƒ±r.</p>
                        <div id="api-status" class="api-status"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Delete Confirm Modal -->
    <div id="delete-confirm-modal" class="modal hidden">
        <div class="modal-backdrop" onclick="window.AtomAgent.cancelDeleteSession()"></div>
        <div class="modal-content confirm-modal">
            <div class="confirm-icon">üóëÔ∏è</div>
            <h3>Sohbeti Sil</h3>
            <p>Bu sohbeti silmek istediƒüinizden emin misiniz?</p>
            <p class="confirm-warning">Bu i≈ülem geri alƒ±namaz.</p>
            <div class="confirm-buttons">
                <button class="small-btn" onclick="window.AtomAgent.cancelDeleteSession()">Vazge√ß</button>
                <button class="small-btn danger" onclick="window.AtomAgent.confirmDeleteSession()">Sil</button>
            </div>
        </div>
    </div>

    <!-- External Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    
    <!-- Modular JavaScript (ES6 Modules) -->
    <script type="module" src="/static/js/app.js?v=3"></script>
</body>
</html>
