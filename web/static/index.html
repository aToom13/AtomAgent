<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>AtomAgent - AI Development Assistant</title>

    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#3b82f6">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="AtomAgent">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="AtomAgent">
    <meta name="msapplication-TileColor" content="#3b82f6">
    <meta name="msapplication-tap-highlight" content="no">

    <!-- PWA Manifest -->
    <link rel="manifest" href="/static/manifest.json">

    <!-- Icons -->
    <link rel="icon" type="image/png" href="/static/icons/logo-square.png">
    <link rel="apple-touch-icon" href="/static/icons/logo-square.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/static/icons/logo-square.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/static/icons/logo-square.png">
    <link rel="apple-touch-icon" sizes="167x167" href="/static/icons/logo-square.png">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap"
        rel="stylesheet">

    <!-- Syntax Highlighting -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">

    <!-- Modular CSS -->
    <link rel="stylesheet" href="/static/css/main.css?v=5">
    <link rel="stylesheet" href="/static/css/mobile.css?v=4">
</head>

<body>
    <div id="app">
        <!-- Left Sidebar - Sessions -->
        <aside id="sidebar" class="sidebar">
            <div class="sidebar-header">
                <button id="toggle-sidebar" class="icon-btn" title="Paneli Daralt">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M11 19l-7-7 7-7M18 19l-7-7 7-7" />
                    </svg>
                </button>
                <span class="sidebar-title">Sohbetler</span>
                <button id="new-chat-btn" class="icon-btn primary" title="Yeni Sohbet">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 5v14M5 12h14" />
                    </svg>
                </button>
            </div>
            <div id="sessions-list" class="sessions-list"></div>
            <div class="sidebar-footer">
                <button id="settings-btn" class="settings-btn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="3" />
                        <path
                            d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z" />
                    </svg>
                    <span>Ayarlar</span>
                </button>
            </div>
        </aside>

        <!-- Collapsed Sidebar -->
        <aside id="sidebar-collapsed" class="sidebar-collapsed hidden">
            <button id="expand-sidebar" class="icon-btn" title="Paneli Geni≈ület">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M13 5l7 7-7 7M6 5l7 7-7 7" />
                </svg>
            </button>
            <button id="new-chat-collapsed" class="icon-btn" title="Yeni Sohbet">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 5v14M5 12h14" />
                </svg>
            </button>
            <div class="collapsed-spacer"></div>
            <button id="settings-collapsed" class="icon-btn" title="Ayarlar">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="3" />
                    <path
                        d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z" />
                </svg>
            </button>
        </aside>

        <!-- Main Chat Area -->
        <main id="chat-area" class="chat-area">
            <div class="chat-header">
                <div class="chat-title">
                    <img src="/static/icons/logo-square.png" alt="AtomAgent" class="header-logo" width="28" height="28">
                    <h1>AtomAgent</h1>
                </div>

                <!-- Active Agent Indicator with Dropdown -->
                <div id="active-agent-indicator" class="active-agent-indicator"
                    onclick="window.AtomAgent.toggleAgentDropdown()">
                    <span class="agent-icon" style="background: #3b82f620; color: #3b82f6">üéØ</span>
                    <span class="agent-name">Supervisor</span>
                    <span class="auto-badge">AUTO</span>
                    <svg class="dropdown-arrow" width="12" height="12" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2">
                        <polyline points="6 9 12 15 18 9" />
                    </svg>
                </div>
                <!-- Agent Dropdown Menu -->
                <div id="agent-dropdown" class="agent-dropdown hidden"></div>

                <div class="chat-status" id="chat-status">
                    <span class="status-dot"></span>
                    <span>Hazƒ±r</span>
                </div>
            </div>

            <div id="messages" class="messages">
                <div class="welcome-message">
                    <div class="welcome-icon">ü§ñ</div>
                    <h2>AtomAgent'a Ho≈ü Geldiniz</h2>
                    <p>AI destekli geli≈ütirme asistanƒ±nƒ±z hazƒ±r. Bir soru sorun veya g√∂rev verin.</p>
                </div>
            </div>

            <!-- Agent Status Bar -->
            <div id="agent-status-bar" class="agent-status-bar hidden">
                <div class="status-indicator" id="status-indicator" onclick="window.AtomAgent.toggleThinkingPanel()">
                    <span class="status-spinner"></span>
                    <span id="status-text">Hazƒ±r</span>
                    <span class="status-expand-icon">‚ñº</span>
                </div>
                <div id="status-model" class="status-model"></div>
            </div>

            <div class="input-area">
                <!-- Attachment Preview -->
                <div id="attachment-preview" class="attachment-preview hidden"></div>

                <div class="input-container">
                    <!-- Attach Button -->
                    <div class="attach-wrapper">
                        <button id="attach-btn" class="attach-btn" title="Dosya Ekle">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <path
                                    d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48" />
                            </svg>
                        </button>
                        <!-- Attach Menu -->
                        <div id="attach-menu" class="attach-menu hidden">
                            <button class="attach-option" data-type="image">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <rect x="3" y="3" width="18" height="18" rx="2" />
                                    <circle cx="8.5" cy="8.5" r="1.5" />
                                    <path d="M21 15l-5-5L5 21" />
                                </svg>
                                <span>Resim</span>
                            </button>
                            <button class="attach-option" data-type="audio">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z" />
                                    <path d="M19 10v2a7 7 0 0 1-14 0v-2" />
                                    <line x1="12" y1="19" x2="12" y2="23" />
                                    <line x1="8" y1="23" x2="16" y2="23" />
                                </svg>
                                <span>Ses Kaydƒ±</span>
                            </button>
                            <button class="attach-option" data-type="file">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
                                    <polyline points="14 2 14 8 20 8" />
                                    <line x1="16" y1="13" x2="8" y2="13" />
                                    <line x1="16" y1="17" x2="8" y2="17" />
                                </svg>
                                <span>Dosya</span>
                            </button>
                            <button class="attach-option" data-type="code">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <polyline points="16 18 22 12 16 6" />
                                    <polyline points="8 6 2 12 8 18" />
                                </svg>
                                <span>Kod Dosyasƒ±</span>
                            </button>
                        </div>
                    </div>

                    <!-- Hidden File Inputs -->
                    <input type="file" id="image-input" accept="image/*" class="hidden-input">
                    <input type="file" id="audio-input" accept="audio/*" class="hidden-input">
                    <input type="file" id="file-input" class="hidden-input">
                    <input type="file" id="code-input"
                        accept=".py,.js,.ts,.jsx,.tsx,.html,.css,.json,.yaml,.yml,.md,.txt,.sh,.sql,.java,.cpp,.c,.h,.go,.rs,.rb,.php"
                        class="hidden-input">

                    <textarea id="message-input"
                        placeholder="Mesajƒ±nƒ±zƒ± yazƒ±n... (Enter g√∂nderir, Shift+Enter yeni satƒ±r)" rows="1"></textarea>

                    <button id="send-btn" class="send-btn" title="G√∂nder">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z" />
                        </svg>
                    </button>
                    <button id="stop-btn" class="stop-btn hidden" title="Durdur">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <rect x="6" y="6" width="12" height="12" rx="2" />
                        </svg>
                    </button>
                </div>
            </div>
        </main>

        <!-- Resize Handle -->
        <div id="resize-handle" class="resize-handle"></div>

        <!-- Right Panel -->
        <aside id="right-panel" class="right-panel">
            <div class="panel-tabs">
                <button class="tab-btn active" data-tab="preview">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                        <circle cx="12" cy="12" r="3"></circle>
                    </svg>
                    <span>√ñnizleme</span>
                </button>
                <button class="tab-btn" data-tab="console">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="4 17 10 11 4 5"></polyline>
                        <line x1="12" y1="19" x2="20" y2="19"></line>
                    </svg>
                    <span>Konsol</span>
                </button>
                <button class="tab-btn" data-tab="project">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
                    </svg>
                    <span>Proje</span>
                </button>
            </div>

            <div class="panel-content">
                <!-- Tab 1: PREVIEW (√ñnizleme) -->
                <div id="tab-preview" class="tab-content active">
                    <div class="preview-container">
                        <!-- Browser Toolbar -->
                        <div class="browser-toolbar">
                            <div class="browser-controls">
                                <button class="browser-btn" id="browser-back" title="Geri">‚Üê</button>
                                <button class="browser-btn" id="browser-forward" title="ƒ∞leri">‚Üí</button>
                                <button class="browser-btn" id="browser-refresh" title="Yenile">‚Üª</button>
                            </div>
                            <div class="url-bar">
                                <span class="lock-icon">üîí</span>
                                <input type="text" id="browser-url" value="http://localhost:8000" readonly>
                            </div>
                            <div class="browser-actions">
                                <button class="browser-btn" id="preview-external" title="Yeni Sekmede A√ß">‚Üó</button>
                            </div>
                        </div>

                        <!-- Content Area -->
                        <div class="preview-content-area">
                            <!-- Window Controls Overlay (for active app) -->
                            <div id="preview-window-controls" class="window-controls hidden">
                                <button class="window-btn close" title="Kapat" data-action="close">‚óè</button>
                                <button class="window-btn minimize" title="K√º√ß√ºlt" data-action="minimize">‚óè</button>
                                <button class="window-btn maximize" title="Tam Ekran" data-action="maximize">‚óè</button>
                                <span class="window-title"></span>
                            </div>

                            <div id="preview-placeholder" class="preview-empty">
                                <div class="preview-icon">üëÅÔ∏è</div>
                                <h3>Bekleniyor...</h3>
                                <p>Agent bir i√ßerik √ºrettiƒüinde burada g√∂r√ºnecek.</p>
                            </div>
                            <iframe id="preview-frame" class="preview-frame hidden"></iframe>
                            <img id="preview-image" class="preview-image hidden" alt="Agent Image">
                            <div id="preview-vnc" class="preview-vnc hidden"></div>

                            <!-- Live Terminal Output Overlay -->
                            <div id="preview-terminal-overlay" class="terminal-overlay">
                                <div class="terminal-overlay-header">
                                    <span class="terminal-status">‚ñ∂ √áalƒ±≈üƒ±yor...</span>
                                    <div class="terminal-controls">
                                        <button id="terminal-overlay-toggle" class="terminal-toggle-btn"
                                            title="K√º√ß√ºlt/B√ºy√ºt">‚àí</button>
                                        <button id="terminal-overlay-close" class="terminal-close-btn"
                                            title="Kapat (tekrar a√ßƒ±lmaz)">√ó</button>
                                    </div>
                                </div>
                                <div id="terminal-overlay-output" class="terminal-overlay-output"></div>
                            </div>
                        </div>

                        <!-- App Taskbar -->
                        <div id="preview-taskbar" class="app-taskbar">
                            <div class="taskbar-apps" id="taskbar-apps">
                                <!-- App buttons added dynamically -->
                            </div>
                        </div>

                        <!-- Status Bar -->
                        <div class="preview-statusbar">
                            <span id="preview-status" class="status-text">Hazƒ±r</span>
                            <div class="device-toggles">
                                <button class="device-btn active" data-device="desktop" title="Masa√ºst√º">üíª</button>
                                <button class="device-btn" data-device="tablet" title="Tablet">üì±</button>
                                <button class="device-btn" data-device="mobile" title="Mobil">üì≤</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tab 2: CONSOLE (Konsol) -->
                <div id="tab-console" class="tab-content">
                    <div class="console-split-view">
                        <!-- Top: Agent Thoughts -->
                        <div class="console-pane top">
                            <div class="pane-header">
                                <div class="pane-title-group">
                                    <span>üß† Agent Zihni</span>
                                    <span class="pane-badge">Canlƒ±</span>
                                </div>
                                <div class="filter-group">
                                    <button class="filter-btn active" data-filter="all">T√ºm√º</button>
                                    <button class="filter-btn" data-filter="agent">Agent</button>
                                    <button class="filter-btn" data-filter="tool">Ara√ßlar</button>
                                </div>
                            </div>
                            <div id="agent-thoughts" class="console-output thoughts-output">
                                <div class="console-line system">Agent ba≈ülatƒ±ldƒ±...</div>
                            </div>
                        </div>

                        <!-- Resizer -->
                        <div class="console-resizer" id="console-resizer"></div>

                        <!-- Bottom: System Terminal -->
                        <div class="console-pane bottom">
                            <div class="pane-header">
                                <div class="pane-title-group">
                                    <span>üíª Sistem Terminali</span>
                                </div>
                                <div class="filter-group">
                                    <button class="filter-btn active" data-filter="all">T√ºm√º</button>
                                    <button class="filter-btn" data-filter="terminal">Terminal</button>
                                    <button class="filter-btn" data-filter="docker">Docker</button>
                                </div>
                                <div class="pane-actions">
                                    <button id="terminal-clear" class="icon-btn small" title="Temizle">üóëÔ∏è</button>
                                </div>
                            </div>
                            <div id="terminal-output" class="console-output terminal-output"></div>
                            <div class="terminal-input-wrapper">
                                <span class="prompt-icon">$</span>
                                <input type="text" id="terminal-input" placeholder="Komut √ßalƒ±≈ütƒ±r..."
                                    autocomplete="off">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tab 3: PROJECT (Proje) -->
                <div id="tab-project" class="tab-content">
                    <div class="project-split-view">
                        <!-- Top: Reminders & Tasks -->
                        <div class="project-header-accordion" id="accordion-plan">
                            <span class="chevron">‚ñº</span>
                            <span>Hatƒ±rlatƒ±cƒ±lar & G√∂revler</span>
                            <div class="pane-actions" style="margin-left:auto;">
                                <button id="add-reminder-btn" class="icon-btn small" title="Hatƒ±rlatƒ±cƒ± Ekle"
                                    style="color:inherit;">+</button>
                            </div>
                        </div>
                        <div class="project-pane top" id="pane-plan-content">
                            <div id="reminders-panel" class="reminders-panel"></div>
                        </div>

                        <!-- Bottom: File Tree -->
                        <div class="project-header-accordion" id="accordion-files">
                            <span class="chevron">‚ñº</span>
                            <span>Dosyalar</span>
                            <div class="pane-actions" style="margin-left:auto;">
                                <button id="refresh-files" class="icon-btn small" title="Yenile"
                                    style="color:inherit;">‚Üª</button>
                            </div>
                        </div>
                        <div class="project-pane bottom" id="pane-files-content" style="flex:1;">
                            <div id="file-tree" class="file-tree"></div>
                        </div>
                    </div>
                </div>
            </div>
        </aside>
    </div>

    <!-- Settings Modal -->
    <div id="settings-modal" class="modal hidden">
        <div class="modal-backdrop"></div>
        <div class="modal-content settings-modal">
            <div class="modal-header">
                <h2>‚öôÔ∏è Ayarlar</h2>
                <button id="close-settings" class="icon-btn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 6L6 18M6 6l12 12" />
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <div class="settings-tabs">
                    <button class="settings-tab active" data-settings="agents">Agentlar</button>
                    <button class="settings-tab" data-settings="models">Modeller</button>
                    <button class="settings-tab" data-settings="fallbacks">Fallback</button>
                    <button class="settings-tab" data-settings="prompts">Promptlar</button>
                    <button class="settings-tab" data-settings="api">API Keys</button>
                </div>

                <!-- Agents Settings -->
                <div id="settings-agents" class="settings-content active">
                    <div class="settings-section">
                        <h3>Agent Ayarlarƒ±</h3>
                        <p class="settings-note">Otomatik agent routing ve varsayƒ±lan agent ayarlarƒ±.</p>

                        <div class="setting-item">
                            <label class="setting-label">
                                <input type="checkbox" id="settings-auto-routing" checked>
                                <span>Otomatik Agent Routing</span>
                            </label>
                            <p class="setting-desc">Mesaj i√ßeriƒüine g√∂re otomatik olarak uygun agent'a y√∂nlendir.</p>
                        </div>

                        <div class="setting-item">
                            <label class="setting-label">Varsayƒ±lan Agent</label>
                            <select id="settings-default-agent">
                                <option value="supervisor" selected>üéØ Supervisor</option>
                                <option value="coder">üë®‚Äçüíª Coder</option>
                                <option value="researcher">üîç Researcher</option>
                                <option value="devops">üöÄ DevOps</option>
                                <option value="qa">üß™ QA</option>
                                <option value="security">üîí Security</option>
                                <option value="uiux">üé® UI/UX</option>
                                <option value="data">üìä Data</option>
                                <option value="api">üîå API</option>
                            </select>
                        </div>

                        <h4>Agent Listesi</h4>
                        <div id="agent-list" class="agent-list"></div>
                    </div>
                </div>

                <!-- Models Settings -->
                <div id="settings-models" class="settings-content">
                    <div class="settings-section">
                        <h3>Agent Modelleri</h3>
                        <p class="settings-note">Ayarlar .atom_settings.json dosyasƒ±na kaydedilir.</p>
                        <div class="model-role-tabs" id="model-role-tabs">
                            <button class="role-tab active" data-role="supervisor">Supervisor</button>
                            <button class="role-tab" data-role="coder">Coder</button>
                            <button class="role-tab" data-role="researcher">Researcher</button>
                            <button class="role-tab" data-role="vision">Vision</button>
                            <button class="role-tab" data-role="audio">Audio</button>
                            <button class="role-tab" data-role="tts">TTS</button>
                        </div>
                        <div class="model-config" id="model-configs"></div>
                    </div>
                </div>

                <!-- Fallback Settings -->
                <div id="settings-fallbacks" class="settings-content">
                    <div class="settings-section">
                        <h3>Fallback Modelleri</h3>
                        <p class="settings-note">Rate limit veya hata durumunda kullanƒ±lacak yedek modeller.</p>
                        <div class="model-role-tabs" id="fallback-role-tabs">
                            <button class="role-tab active" data-role="supervisor">Supervisor</button>
                            <button class="role-tab" data-role="coder">Coder</button>
                            <button class="role-tab" data-role="researcher">Researcher</button>
                            <button class="role-tab" data-role="vision">Vision</button>
                            <button class="role-tab" data-role="audio">Audio</button>
                            <button class="role-tab" data-role="tts">TTS</button>
                        </div>
                        <div class="fallback-config" id="fallback-configs"></div>
                        <div class="add-fallback">
                            <h4>Yeni Fallback Ekle</h4>
                            <div class="fallback-form">
                                <select id="new-fallback-provider"></select>
                                <input type="text" id="new-fallback-model" placeholder="Model adƒ±">
                                <button id="add-fallback-btn" class="small-btn primary">Ekle</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Prompts Settings -->
                <div id="settings-prompts" class="settings-content">
                    <div class="settings-section">
                        <h3>Sistem Promptlarƒ±</h3>
                        <div class="prompt-selector">
                            <select id="prompt-select">
                                <option value="supervisor">Supervisor</option>
                                <option value="coder">Coder</option>
                                <option value="researcher">Researcher</option>
                                <option value="planner">Planner</option>
                            </select>
                        </div>
                        <textarea id="prompt-editor" class="prompt-editor" rows="15"></textarea>
                        <button id="save-prompt-btn" class="primary-btn">Promptu Kaydet</button>
                    </div>
                </div>

                <!-- API Keys Settings -->
                <div id="settings-api" class="settings-content">
                    <div class="settings-section">
                        <h3>API Anahtarlarƒ±</h3>
                        <p class="settings-note">API anahtarlarƒ± .env dosyasƒ±nda saklanƒ±r.</p>
                        <div id="api-status" class="api-status"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Delete Confirm Modal -->
    <div id="delete-confirm-modal" class="modal hidden">
        <div class="modal-backdrop" onclick="window.AtomAgent.cancelDeleteSession()"></div>
        <div class="modal-content confirm-modal">
            <div class="confirm-icon">üóëÔ∏è</div>
            <h3>Sohbeti Sil</h3>
            <p>Bu sohbeti silmek istediƒüinizden emin misiniz?</p>
            <p class="confirm-warning">Bu i≈ülem geri alƒ±namaz.</p>
            <div class="confirm-buttons">
                <button class="small-btn" onclick="window.AtomAgent.cancelDeleteSession()">Vazge√ß</button>
                <button class="small-btn danger" onclick="window.AtomAgent.confirmDeleteSession()">Sil</button>
            </div>
        </div>
    </div>

    <!-- External Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

    <!-- Modular JavaScript    <!-- Core Logic -->
    <script type="module" src="/static/js/reminders.js"></script>
    <script type="module" src="/static/js/app.js?v=10"></script>

    <!-- Mobile UI -->
    <script src="/static/js/mobile.js"></script>

    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/static/sw.js')
                    .then(reg => console.log('[PWA] Service Worker registered:', reg.scope))
                    .catch(err => console.error('[PWA] Service Worker registration failed:', err));
            });
        }
    </script>
</body>

</html>